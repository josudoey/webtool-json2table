"use strict";(self.webpackChunkwebtool_json2table=self.webpackChunkwebtool_json2table||[]).push([[211],{211:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var s=a(132),l=a(699);const n=Symbol("ScalarType"),o=Symbol("ObjectType"),r="state",i=["text"],u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[t._v("json2table")])],1),a("v-main",[a("v-container",{attrs:{fluid:"",outlined:"",height:"30vh"}},[a("v-textarea",{attrs:{outlined:"",label:"json"},on:{input:t.translate},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),a("v-container",{staticClass:"overflow-auto",attrs:{fluid:"",outlined:"",height:"60vh"}},[a("json-table",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)],1)},staticRenderFns:[],components:{JsonTable:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-inline-block pa-0 ma-0"},[t.isNull(t.value)?a("div",{staticClass:"pa-0 ma-0"}):t.isScalarType(t.value)?a("div",{staticClass:"pa-0 ma-0"},[t._v(t._s(t.value))]):Array.isArray(t.value)?a("v-simple-table",{attrs:{dense:"",outlined:"",height:"auto"},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",{attrs:{outlined:""}},[a("tr",t._l(t.getColumns(t.value),(function(e){return a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{staticClass:"font-weight-black",attrs:{outlined:"",height:"100%",width:"100%"}},[e===t.ScalarType?void 0:null!==t.getColumnName(e)?[t._v(t._s(t.getColumnName(e)))]:t._e()],2)],1)})),0)]),a("tbody",t._l(t.value,(function(e,s){return a("tr",t._l(t.getColumns(t.value),(function(l){return a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{attrs:{outlined:"",height:"100%",width:"100%"}},[t.isNull(e)?void 0:l===t.ScalarType&&t.isScalarType(e)?[t._v(t._s(e))]:null!==t.getColumnName(l)?[a("json-table",{attrs:{value:e[t.getColumnName(l)]}})]:Array.isArray(l)&&l[0]===s?[a("json-table",{attrs:{value:e}})]:t._e()],2)],1)})),0)})),0)]},proxy:!0}])}):"object"==typeof t.value?a("v-simple-table",{attrs:{dense:"",outlined:""},scopedSlots:t._u([Object.keys(t.value).length>0?{key:"default",fn:function(){return[a("tbody",t._l(t.value,(function(e,s){return a("tr",[a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{staticClass:"font-weight-black",attrs:{outlined:"",height:"100%",width:"100%"}},[t._v(t._s(s))])],1),a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{attrs:{outlined:"",height:"100%",width:"100%"}},[a("json-table",{attrs:{value:e}})],1)],1)])})),0)]},proxy:!0}:null],null,!0)}):t._e()],1)},staticRenderFns:[],name:"json-table",props:["value"],data:()=>({ObjectType:o,ScalarType:n}),mounted(){},methods:{typeof:t=>typeof t,isNull:t=>null==t,isScalarType(t){const e=typeof t;return"string"===e||"number"===e||"boolean"===e},getColumnName:t=>"symbol"!=typeof t?null:t.description,getColumns(t){const e=new Set,a=new Set;for(let s=0;s<t.length;s++){const l=t[s];if(Array.isArray(l))e.add([s]);else if(this.isNull(l))e.add(null);else if("object"!=typeof l)e.add(n);else for(const t of Object.keys(l))a.has(t)||(a.add(t),e.add(Symbol(t)))}return Array.from(e)}}}},data:()=>({text:"{hello: 'world'}",value:""}),mounted(){this.load(),this.translate()},updated(){this.save()},methods:{save:function(){const t=JSON.stringify((0,l.pick)(this.$data,i));window.sessionStorage.setItem(r,t)},load(){const t=window.sessionStorage.getItem(r);if(!t)return;const e=(0,l.pick)(JSON.parse(t),i);Object.assign(this.$data,e)},getMongoJSONText:t=>t.replaceAll(/NumberLong\((\d+)\)/g,"$1").replaceAll(/ObjectId\(("[0-9a-f]{24}")\)/g,"$1").replaceAll(/ISODate\(("\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z")\)/g,"$1"),translate(){try{const t=this.getMongoJSONText(this.text);this.value=s.parse(t),this.save()}catch(t){this.value="",this.$bvToast.toast(t.message,{title:"Parse Error",autoHideDelay:1e3,appendToast:!0})}}}}}}]);