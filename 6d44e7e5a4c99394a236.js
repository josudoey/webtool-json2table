"use strict";(self.webpackChunkwebtool_json2table=self.webpackChunkwebtool_json2table||[]).push([[112],{112:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var s=a(142),l=a(486);const n=Symbol("ScalarType"),o=Symbol("ObjectType"),r="state",i=["text"],c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid px-0"},[t._m(0),a("div",{staticClass:"container-fluid px-0 d-flex flex-wrap"},[a("b-card",{staticClass:"w-100",attrs:{"no-body":""}},[a("b-card-body",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"w-100",staticStyle:{"min-height":"calc(30vh)"},domProps:{value:t.text},on:{input:[function(e){e.target.composing||(t.text=e.target.value)},t.translate]}})])],1),a("b-card",{staticClass:"w-100",staticStyle:{"min-height":"calc(60vh)"},attrs:{"no-body":""}},[a("b-card-body",{staticClass:"overflow-auto"},[a("json-table",{staticClass:"w-50",model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1)],1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-dark bg-dark"},[a("div",{staticClass:"navbar-brand d-flex"},[a("div",[t._v("JSON to table")])])])}],components:{JsonTable:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-inline-block small p-0 m-0 w-100"},[t.isNull(t.value)?a("div",{staticClass:"p-0 pb-1 m-0"}):t.isScalarType(t.value)?a("div",{staticClass:"p-0 pb-1 m-0"},[t._v(t._s(t.value))]):Array.isArray(t.value)?a("table",{staticClass:"table table-bordered m-0"},[a("tbody",[a("tr",t._l(t.getColumns(t.value),(function(e){return a("th",{staticClass:"p-0 m-0"},[e===t.ScalarType?void 0:null!==t.getColumnName(e)?[t._v(t._s(t.getColumnName(e)))]:t._e()],2)})),0),t._l(t.value,(function(e,s){return a("tr",t._l(t.getColumns(t.value),(function(l){return a("td",{staticClass:"p-0 m-0"},[t.isNull(e)?void 0:l===t.ScalarType&&t.isScalarType(e)?[t._v(t._s(e))]:null!==t.getColumnName(l)?[a("json-table",{attrs:{value:e[t.getColumnName(l)]}})]:Array.isArray(l)&&l[0]===s?[a("json-table",{attrs:{value:e}})]:t._e()],2)})),0)}))],2)]):"object"==typeof t.value?a("table",{staticClass:"table table table-bordered m-0"},[Object.keys(t.value).length>0?[a("tbody",t._l(t.value,(function(e,s){return a("tr",[a("th",{staticClass:"p-0 m-0"},[t._v(t._s(s))]),a("td",{staticClass:"p-0 m-0"},[a("json-table",{attrs:{value:e}})],1)])})),0)]:t._e()],2):t._e()])},staticRenderFns:[],name:"json-table",props:["value"],data:()=>({ObjectType:o,ScalarType:n}),mounted(){},methods:{typeof:t=>typeof t,isNull:t=>null==t,isScalarType(t){const e=typeof t;return"string"===e||"number"===e||"boolean"===e},getColumnName:t=>"symbol"!=typeof t?null:t.description,getColumns(t){const e=new Set,a=new Set;for(let s=0;s<t.length;s++){const l=t[s];if(Array.isArray(l))e.add([s]);else if(this.isNull(l))e.add(null);else if("object"!=typeof l)e.add(n);else for(const t of Object.keys(l))a.has(t)||(a.add(t),e.add(Symbol(t)))}return Array.from(e)}}}},data:()=>({text:"{hello: 'world'}",value:""}),mounted(){this.load(),this.translate()},updated(){this.save()},methods:{save:function(){const t=JSON.stringify((0,l.pick)(this.$data,i));window.sessionStorage.setItem(r,t)},load(){const t=window.sessionStorage.getItem(r);if(!t)return;const e=(0,l.pick)(JSON.parse(t),i);Object.assign(this.$data,e)},getMongoJSONText:t=>t.replaceAll(/ObjectId\(("[0-9a-f]{24}")\)/g,"$1").replaceAll(/ISODate\(("\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z")\)/g,"$1"),translate(){try{const t=this.getMongoJSONText(this.text);this.value=s.parse(t),this.save()}catch(t){this.value="",this.$bvToast.toast(t.message,{title:"Parse Error",autoHideDelay:1e3,appendToast:!0})}}}}}}]);