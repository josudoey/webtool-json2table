"use strict";(self.webpackChunkwebtool_json2table=self.webpackChunkwebtool_json2table||[]).push([[248],{248:(t,e,a)=>{a.r(e),a.d(e,{default:()=>k});var n={};a.r(n),a.d(n,{render:()=>i,staticRenderFns:()=>u});var s={};a.r(s),a.d(s,{render:()=>h,staticRenderFns:()=>p});var o={};a.r(o),a.d(o,{render:()=>b,staticRenderFns:()=>y});var l=a(132),r=a(699),i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-snackbar",{attrs:{timeout:t.timeout},on:{input:t.onChanged},model:{value:t.opened,callback:function(e){t.opened=e},expression:"opened"}},[t._v(t._s(t.text))])},u=[];const c={...n,data:()=>({opened:!0,text:"",timeout:1e3}),computed:{},created(){},mounted(){},destroyed(){this.$el.remove()},methods:{onChanged(t){if(t)return;const e=this;setTimeout((function(){e.$destroy()}),2e3)}}};function d(t,e){const a=new(t.$root.constructor.extend(c))({parent:t});Object.assign(a,e);const n=document.createElement("div");return document.body.appendChild(n),a.$mount(n),a}var h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-inline-block pa-0 ma-0"},[t.isNull(t.value)?a("div",{staticClass:"pa-0 ma-0"}):t.isScalarType(t.value)?a("div",{staticClass:"pa-0 ma-0"},[t._v(t._s(t.value))]):Array.isArray(t.value)?a("v-simple-table",{attrs:{dense:"",outlined:"",height:"auto"},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",{attrs:{outlined:""}},[a("tr",t._l(t.getColumns(t.value),(function(e){return a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{staticClass:"font-weight-black",attrs:{outlined:"",height:"100%",width:"100%"}},[e===t.ScalarType?void 0:null!==t.getColumnName(e)?[t._v(t._s(t.getColumnName(e)))]:t._e()],2)],1)})),0)]),a("tbody",t._l(t.value,(function(e,n){return a("tr",t._l(t.getColumns(t.value),(function(s){return a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{attrs:{outlined:"",height:"100%",width:"100%"}},[t.isNull(e)?void 0:s===t.ScalarType&&t.isScalarType(e)?[t._v(t._s(e))]:null!==t.getColumnName(s)?[a("json-table",{attrs:{value:e[t.getColumnName(s)]}})]:Array.isArray(s)&&s[0]===n?[a("json-table",{attrs:{value:e}})]:t._e()],2)],1)})),0)})),0)]},proxy:!0}])}):"object"==typeof t.value?a("v-simple-table",{attrs:{dense:"",outlined:""},scopedSlots:t._u([Object.keys(t.value).length>0?{key:"default",fn:function(){return[a("tbody",t._l(t.value,(function(e,n){return a("tr",[a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{staticClass:"font-weight-black",attrs:{outlined:"",height:"100%",width:"100%"}},[t._v(t._s(n))])],1),a("td",{staticClass:"pa-0 ma-0"},[a("v-sheet",{attrs:{outlined:"",height:"100%",width:"100%"}},[a("json-table",{attrs:{value:e}})],1)],1)])})),0)]},proxy:!0}:null],null,!0)}):t._e()],1)},p=[];const v=Symbol("ScalarType"),m=Symbol("ObjectType"),f={...s,name:"json-table",props:["value"],data:()=>({ObjectType:m,ScalarType:v}),mounted(){},methods:{typeof:t=>typeof t,isNull:t=>null==t,isScalarType(t){const e=typeof t;return"string"===e||"number"===e||"boolean"===e},getColumnName:t=>"symbol"!=typeof t?null:t.description,getColumns(t){const e=new Set,a=new Set;for(let n=0;n<t.length;n++){const s=t[n];if(Array.isArray(s))e.add([n]);else if(this.isNull(s))e.add(null);else if("object"!=typeof s)e.add(v);else for(const t of Object.keys(s))a.has(t)||(a.add(t),e.add(Symbol(t)))}return Array.from(e)}}};var b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.err?t._e():a("span",[t._t("default",null,{item:t.result})],2)},y=[],g=a(355);const _={...o,props:["value","path","count"],data:()=>({result:null,err:null}),watch:{value(){this.query()}},mounted(){this.query()},methods:{query(){this.err=null;const{value:t,path:e,count:a}=this;try{this.result=g.query(t,e,a)}catch(t){this.err=t,this.$emit("error",t)}}}},S="state",j=["text","jsonpath","outJSON"],k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:""}},[a("v-toolbar-title",[t._v("json2table")])],1),a("v-main",[a("v-container",{attrs:{fluid:"",outlined:"",height:"30vh"}},[a("v-textarea",{attrs:{outlined:"",label:"json","hide-details":""},on:{input:t.translate},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),a("v-row",[a("v-col",{attrs:{cols:"auto"}},[a("v-switch",{attrs:{label:"output json"},model:{value:t.outJSON,callback:function(e){t.outJSON=e},expression:"outJSON"}})],1),a("v-col",{staticClass:"d-flex align-center",attrs:{cols:"auto"}},[a("div",[a("a",{attrs:{href:"https://jsonpath.com/",target:"_blank"}},[t._v("See: JSONPath - https://jsonpath.com/")])])])],1),a("v-text-field",{attrs:{outlined:"",dense:"",label:"JSONpath","hide-details":""},on:{input:t.translate},model:{value:t.jsonpath,callback:function(e){t.jsonpath=e},expression:"jsonpath"}})],1),a("v-container",{staticClass:"overflow-auto",attrs:{fluid:"",dense:"",outlined:"",height:"60vh"}},[t.outJSON?[t.value&&t.jsonpath?a("json-path",{attrs:{path:t.jsonpath},on:{error:t.onError},scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",[t._v(t._s(JSON.stringify(e.item,null,2)))])]}}],null,!1,3602040929),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):a("pre",[t._v(t._s(JSON.stringify(t.value,null,2)))])]:[t.value&&t.jsonpath?a("json-path",{attrs:{path:t.jsonpath},on:{error:t.onError},scopedSlots:t._u([{key:"default",fn:function(e){return[a("json-table",{model:{value:e.item,callback:function(a){t.$set(e,"item",a)},expression:"data.item"}})]}}],null,!1,1252880097),model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):a("json-table",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})]],2)],1)],1)},staticRenderFns:[],components:{JsonTable:f,JsonPath:_},data:()=>({jsonpath:"",outJSON:!1,text:'{"store":{"book":[{"category":"reference","author":"Nigel Rees","title":"Sayings of the Century","price":8.95},{"category":"fiction","author":"Evelyn Waugh","title":"Sword of Honour","price":12.99},{"category":"fiction","author":"Herman Melville","title":"Moby Dick","isbn":"0-553-21311-3","price":8.99},{"category":"fiction","author":"J. R. R. Tolkien","title":"The Lord of the Rings","isbn":"0-395-19395-8","price":22.99}],"bicycle":{"color":"red","price":19.95}}}',value:""}),mounted(){window.show=d.bind(this,this),this.load(),this.translate()},updated(){this.save()},methods:{save:function(){const t=JSON.stringify((0,r.pick)(this.$data,j));window.sessionStorage.setItem(S,t)},load(){const t=window.sessionStorage.getItem(S);if(!t)return;const e=(0,r.pick)(JSON.parse(t),j);Object.assign(this.$data,e)},getMongoJSONText:t=>t.replaceAll(/NumberLong\((\d+)\)/g,"$1").replaceAll(/ObjectId\(("[0-9a-f]{24}")\)/g,"$1").replaceAll(/ISODate\(("\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z")\)/g,"$1"),onError(t){d(this,{text:t.message,timeout:2e3})},translate(){try{const t=this.getMongoJSONText(this.text);this.value=l.parse(t),this.save()}catch(t){this.value="",this.onError(t)}}}}}}]);